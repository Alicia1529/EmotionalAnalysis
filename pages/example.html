<!doctype html>
<html>

<head>
	<title>Line Chart</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.bundle.js"></script>
	<script src="utils.js"></script>
	<style>
		canvas {
			-moz-user-select: none;
			-webkit-user-select: none;
			-ms-user-select: none;
		}
	</style>
</head>

<body>
	<div style="width:75%;">
		<canvas id="canvas"></canvas>
	</div>
	<br>
	<br>

	<script>
		var timeFormat = 'MM/DD/YYYY HH:mm';
		var d = new Date();
		var hour = d.getHours();

		if (hour > 12) {
			hour = (hour - 12).toString();
			hour = hour + "PM";
		}else{
			hour = hour.toString() + "AM";
		}
		console.log(hour);

		function newDate(days) {
			return moment().add(days, 'd').toDate();
		}

		function newDateString(days) {
			return moment().add(days, 'd').format(timeFormat);
		}

		var color = Chart.helpers.color;
		var config = {
			type: 'line',
			data: {
				labels: [ // Date Objects
					newDate(-2),
					newDate(-1),
					newDate(0),
					newDate(1)
				],
				datasets: [{
					label: 'index of anger',
					backgroundColor: color(window.chartColors.red).alpha(0.5).rgbString(),
					borderColor: window.chartColors.red,
					fill: false,
					data: [10, 6, 2],
				}, {
					label: 'index of fear',
					backgroundColor: color(window.chartColors.blue).alpha(0.5).rgbString(),
					borderColor: window.chartColors.blue,
					fill: false,
					data: [12, 19, 3],
				}, {
					label: 'index of joy',
					backgroundColor: color(window.chartColors.green).alpha(0.5).rgbString(),
					borderColor: window.chartColors.green,
					fill: false,
					data: [2, 3, 10],
				}]
			},
			options: {
				title: {
					text: 'Chart.js Time Scale'
				},
				scales: {
					xAxes: [{
						type: 'time',
						ticks:{
							// callback:function(index){
							// 	if (index != hour) {
							// 		return;
							// 	}
							// 	else{
							// 		return d.getDate();
							// 	}
							// }
						},
						time: {
							// format: timeFormat,
							//  round: 'day',
							// tooltipFormat: 'll HH:mm'
							displayFormats:{
								quarter:'MMM D'
							}
						},
						scaleLabel: {
							display: false,
							labelString: 'Date'
						}
					}],
					yAxes: [{
						scaleLabel: {
							display: false,
							labelString: 'value'
						}
					}]
				},
			}
		};

		window.onload = function() {
			var ctx = document.getElementById('canvas').getContext('2d');
			window.myLine = new Chart(ctx, config);

		};
	</script>
</body>

</html>

